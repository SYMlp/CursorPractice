# 更新记录

## 2024-07-15: 修复API接口中的数据引用问题

- 修复了API层`asset.ts`文件中对不存在模块的引用
- 在API层中添加了`generateMockChartData`函数实现，与页面组件中的实现保持一致
- 将原有引用`extendedAssetInteractionRankData`和`extendedRiskBusinessRankData`修改为`applicationInteractionRankData`和`riskBusinessRankData`
- 导入`getChartData`函数，用于生成图表数据
- 完成时间：2024-07-15 18:15:45

## 2024-07-13: 数据层架构优化

- 创建分层数据架构，包括API层、模拟数据层、服务层和工具层
- 实现资产监控模块的API接口、服务和工具函数
- 添加环境变量配置，支持模拟数据与真实API的切换
- 优化项目文档，完善README文件
- 规范化模拟数据的组织结构和代码规范
- 添加数据格式化和转换工具，提高代码复用性
- 完成时间：2024-07-13 15:30:45

## 2024-07-12: 资产监控模拟数据优化

- 将资产监控模块的模拟数据迁移到独立目录
- 统一类型定义并导出，提高代码可维护性
- 更新页面组件中的数据导入路径
- 保持原有功能逻辑不变
- 完成时间：2024-07-12 14:15:30

## 2024-07-10: 应用资产监控页面优化

- 统一使用charts目录下的index.ts导出的组件
- 将原有的PieChart替换为DonutChart，改善告警类型分布的展示效果
- 确保图表组件接口兼容性，修复BarChart的showLabel属性支持
- 完成时间：2024-07-10 11:45:22

## 2024-07-01: 优化页面布局和交互体验

- 添加时间范围选择功能和加载状态
- 统一各个图表的风格和交互行为
- 完善资产访问关系图的风险等级分类
- 完成时间：2024-07-01 16:30:18

## 2024-06-30: 统一页面风格

- 与平台概览页保持视觉风格一致性
- 优化响应式布局，提升在不同设备上的显示效果
- 调整颜色方案，提高图表可读性
- 完成时间：2024-06-30 09:55:40

## 2024-06-26: 文件一致性调整

- 移除了 src 根目录下的冗余 mockData.ts 文件，统一使用 data 目录下的版本
- 确认 SecurityMonitoring.tsx 为重定向文件，指向 DataAssetMonitoring.tsx
- 更新组件库 README 中的引用，将 SecurityMonitoring.tsx 改为 DataAssetMonitoring.tsx
- 在数据层 README 中添加了 assetFlowData.ts 的文件说明和数据模型
- 完善了项目更新记录，添加最新的修改内容
- 完成时间：2024-06-26 14:20:33

## 2024-06-25: 项目结构清理

- 删除未使用的页面和组件
- 更新文档和说明，保持文档与实际代码一致
- 精简状态管理，简化了 App.tsx 中的页面状态
- 完成时间：2024-06-25 10:40:15

## 2024-04-15: 文件结构优化

- 创建独立节点组件目录，添加各类节点组件
- 调整主组件位置，优化导入路径
- 按功能分类组织代码，提高代码可维护性
- 完成时间：2024-04-15 11:25:37

## 2024-07-15: 修复资产监控页面的导入问题

- 修复了AssetMonitoring.tsx中不存在的模块导入问题
- 添加自定义的generateMockChartData函数，改善数据处理逻辑
- 更新变量名称，将extended前缀的数据变量替换为实际存在的模块
- 修复了类型安全问题，确保getChartData函数返回值的类型安全处理
- 优化了图表数据的处理和渲染逻辑
- 完成时间：2024-07-15 17:35:22

## 2024-07-16: 调整应用资产监控页面布局

- 重新组织应用资产监控页面布局，符合业务需求设计
- 上部分区域划分为左中右三列布局：
  - 左侧展示数据交互量应用TOP和频繁登录用户TOP
  - 中间展示关键监控指标统计(告警数、访问者数、应用数)和关系图
  - 右侧展示风险最多业务应用TOP和数据使用风险最多人员TOP
- 下部分区域划分为左右两列布局：
  - 左侧展示业务应用访问趋势
  - 右侧展示告警类型分布
- 添加AssetFlowChart组件显示资产访问关系图
- 完成时间：2024-07-16 10:25:37

## 2024-07-16: 优化资产访问关系图展示

- 修改AssetFlowChart组件，增加更多节点和连接数据
- 应用节点由3个增加到6个，用户节点由2个增加到5个，告警节点由2个增加到4个
- 将连线类型从曲线(smoothstep)改为直线(straight)，提高关系图的清晰度
- 增加各节点之间的连线数量，更全面展示资产之间的访问关系
- 为大部分连线添加IP地址标签，增强信息展示
- 优化节点位置布局，形成更清晰的网络拓扑结构
- 完成时间：2024-07-16 11:30:45

## 2024-07-16: 修复资产访问关系图连线显示问题

- 修复了资产访问关系图中节点之间没有连线显示的问题
- 将连线类型从'straight'改回默认的'default'类型，确保连线正确渲染
- 使用ReactFlow的useNodesState和useEdgesState钩子进行状态管理
- 添加onNodesChange和onEdgesChange处理函数，支持交互
- 优化节点位置布局，增大节点间距，使关系图更清晰
- 移除了部分冗余连线，保持图表的可读性
- 完成时间：2024-07-16 14:15:23

## 2024-07-16: 优化AssetFlowChart组件，使用传入的数据

- 将AssetFlowChart组件重构为接收props数据的组件
- 在模拟数据层添加了assetFlowChartData，包含节点和连线数据
- 修改AssetMonitoring页面，将模拟数据传递给AssetFlowChart组件
- 删除组件内部硬编码的数据，提高组件复用性
- 使用ReactFlow的MarkerType枚举代替字符串类型，解决类型兼容性问题
- 添加默认空数据处理，确保组件在无数据时不会崩溃
- 完成时间：2024-07-16 16:30:15

## 2024-07-17: 重写应用资产监管中告警类型分布组件及数据

- 重写了DonutChart组件，添加了点击事件支持和更丰富的配置选项
- 优化了告警类型分布饼图的视觉效果，调整了颜色方案
- 在图表中添加了详细的提示信息，包括告警描述
- 重新生成告警类型分布的假数据，增加了更多告警类型
- 为不同时间范围设计了不同的数据分布规则，使数据更真实
- 添加了告警类型的详细描述信息，增强了数据内容
- 在AssetMonitoring页面中为告警类型分布组件添加了时间选择器
- 调整了饼图展示参数，从南丁格尔玫瑰图改为标准环形图，提高可读性
- 完成时间：2024-07-17 14:45:30

## 2024-07-18: 修复DonutChart组件并创建图表测试页面

- 修复了DonutChart组件中的series配置问题，确保环形图正确渲染
- 优化了DonutChart组件的事件处理机制，支持点击交互
- 创建了ChartTest测试页面，用于展示和测试各种图表组件
- 在测试页面中实现了从原始ECharts配置到DonutChart组件的转换示例
- 增强了DonutChart组件的文档注释，便于开发者理解各配置项的作用
- 完成时间：2024-07-18 11:30:45

## 2024-07-18: 优化数据资产防护监测页面布局

- 根据UI设计图重新调整数据资产防护监测页面的整体布局
- 采用上下两部分的主要布局结构：
  - 上部分分为左右布局：
    - 左侧展示访问关系图以及数据资源数、数据分类数、数据分级数统计
    - 右侧采用上下布局，分别展示风险最多数据资源TOP和高敏数据使用风险最多人员TOP
  - 下部分分为左右布局：
    - 左侧采用左右布局，分别展示存在存储风险的数据资源TOP和存在防护能力缺失的数据资源TOP
    - 右侧展示最常发生的风险类型趋势图
- 优化了卡片内容的展示，调整了各个区域的高度和空间分配
- 调整了组件的标题文案，使其更符合业务语境
- 完善了页面组件的注释文档，更新了组件的功能描述
- 完成时间：2024-07-18 15:45:20 