# 更新记录

## 2024-08-02：统一数据资产安全页面与其他页面的布局
1. 调整了DataAssetMonitoring.tsx页面的整体布局结构，使其与应用资产监控等页面保持一致
2. 替换了自定义全屏布局为标准页面布局(p-4, max-w-7xl, mx-auto)
3. 添加了页面标题区域，包含标题和最后更新时间
4. 将上部区域从弹性高度改为固定高度480px，与其他页面保持一致
5. 将下部区域高度从300px调整为320px，与应用资产监控页面保持一致
6. 优化了趋势图区域的布局，使其能更好地适应容器高度
7. 完成时间：2024-08-02 ${new Date().toLocaleString('zh-CN')}

## 2024-08-01：修复数据资产安全页面的左侧菜单显示问题
1. 修改了DataAssetMonitoring.tsx页面的根元素布局样式
2. 移除了w-screen和h-screen类，这些类导致页面覆盖了App.tsx中定义的左侧菜单
3. 使用h-full类确保页面在主内容区域内显示，不再覆盖左侧菜单
4. 保留了p-4内边距设置，确保内容区域的间距与原设计一致
5. 优化了页面布局，使其能够在App.tsx定义的布局结构中正确显示
6. 完成时间：2024-08-01 ${new Date().toLocaleString('zh-CN')}

## 2024-07-15: 修复API接口中的数据引用问题

- 修复了API层`asset.ts`文件中对不存在模块的引用
- 在API层中添加了`generateMockChartData`函数实现，与页面组件中的实现保持一致
- 将原有引用`extendedAssetInteractionRankData`和`extendedRiskBusinessRankData`修改为`applicationInteractionRankData`和`riskBusinessRankData`
- 导入`getChartData`函数，用于生成图表数据
- 完成时间：2024-07-15 18:15:45

## 2024-07-13: 数据层架构优化

- 创建分层数据架构，包括API层、模拟数据层、服务层和工具层
- 实现资产监控模块的API接口、服务和工具函数
- 添加环境变量配置，支持模拟数据与真实API的切换
- 优化项目文档，完善README文件
- 规范化模拟数据的组织结构和代码规范
- 添加数据格式化和转换工具，提高代码复用性
- 完成时间：2024-07-13 15:30:45

## 2024-07-12: 资产监控模拟数据优化

- 将资产监控模块的模拟数据迁移到独立目录
- 统一类型定义并导出，提高代码可维护性
- 更新页面组件中的数据导入路径
- 保持原有功能逻辑不变
- 完成时间：2024-07-12 14:15:30

## 2024-07-10: 应用资产监控页面优化

- 统一使用charts目录下的index.ts导出的组件
- 将原有的PieChart替换为DonutChart，改善告警类型分布的展示效果
- 确保图表组件接口兼容性，修复BarChart的showLabel属性支持
- 完成时间：2024-07-10 11:45:22

## 2024-07-01: 优化页面布局和交互体验

- 添加时间范围选择功能和加载状态
- 统一各个图表的风格和交互行为
- 完善资产访问关系图的风险等级分类
- 完成时间：2024-07-01 16:30:18

## 2024-06-30: 统一页面风格

- 与平台概览页保持视觉风格一致性
- 优化响应式布局，提升在不同设备上的显示效果
- 调整颜色方案，提高图表可读性
- 完成时间：2024-06-30 09:55:40

## 2024-06-26: 文件一致性调整

- 移除了 src 根目录下的冗余 mockData.ts 文件，统一使用 data 目录下的版本
- 确认 SecurityMonitoring.tsx 为重定向文件，指向 DataAssetMonitoring.tsx
- 更新组件库 README 中的引用，将 SecurityMonitoring.tsx 改为 DataAssetMonitoring.tsx
- 在数据层 README 中添加了 assetFlowData.ts 的文件说明和数据模型
- 完善了项目更新记录，添加最新的修改内容
- 完成时间：2024-06-26 14:20:33

## 2024-06-25: 项目结构清理

- 删除未使用的页面和组件
- 更新文档和说明，保持文档与实际代码一致
- 精简状态管理，简化了 App.tsx 中的页面状态
- 完成时间：2024-06-25 10:40:15

## 2024-04-15: 文件结构优化

- 创建独立节点组件目录，添加各类节点组件
- 调整主组件位置，优化导入路径
- 按功能分类组织代码，提高代码可维护性
- 完成时间：2024-04-15 11:25:37

## 2024-07-15: 修复资产监控页面的导入问题

- 修复了AssetMonitoring.tsx中不存在的模块导入问题
- 添加自定义的generateMockChartData函数，改善数据处理逻辑
- 更新变量名称，将extended前缀的数据变量替换为实际存在的模块
- 修复了类型安全问题，确保getChartData函数返回值的类型安全处理
- 优化了图表数据的处理和渲染逻辑
- 完成时间：2024-07-15 17:35:22

## 2024-07-16: 调整应用资产监控页面布局

- 重新组织应用资产监控页面布局，符合业务需求设计
- 上部分区域划分为左中右三列布局：
  - 左侧展示数据交互量应用TOP和频繁登录用户TOP
  - 中间展示关键监控指标统计(告警数、访问者数、应用数)和关系图
  - 右侧展示风险最多业务应用TOP和数据使用风险最多人员TOP
- 下部分区域划分为左右两列布局：
  - 左侧展示业务应用访问趋势
  - 右侧展示告警类型分布
- 添加AssetFlowChart组件显示资产访问关系图
- 完成时间：2024-07-16 10:25:37

## 2024-07-16: 优化资产访问关系图展示

- 修改AssetFlowChart组件，增加更多节点和连接数据
- 应用节点由3个增加到6个，用户节点由2个增加到5个，告警节点由2个增加到4个
- 将连线类型从曲线(smoothstep)改为直线(straight)，提高关系图的清晰度
- 增加各节点之间的连线数量，更全面展示资产之间的访问关系
- 为大部分连线添加IP地址标签，增强信息展示
- 优化节点位置布局，形成更清晰的网络拓扑结构
- 完成时间：2024-07-16 11:30:45

## 2024-07-16: 修复资产访问关系图连线显示问题

- 修复了资产访问关系图中节点之间没有连线显示的问题
- 将连线类型从'straight'改回默认的'default'类型，确保连线正确渲染
- 使用ReactFlow的useNodesState和useEdgesState钩子进行状态管理
- 添加onNodesChange和onEdgesChange处理函数，支持交互
- 优化节点位置布局，增大节点间距，使关系图更清晰
- 移除了部分冗余连线，保持图表的可读性
- 完成时间：2024-07-16 14:15:23

## 2024-07-16: 优化AssetFlowChart组件，使用传入的数据

- 将AssetFlowChart组件重构为接收props数据的组件
- 在模拟数据层添加了assetFlowChartData，包含节点和连线数据
- 修改AssetMonitoring页面，将模拟数据传递给AssetFlowChart组件
- 删除组件内部硬编码的数据，提高组件复用性
- 使用ReactFlow的MarkerType枚举代替字符串类型，解决类型兼容性问题
- 添加默认空数据处理，确保组件在无数据时不会崩溃
- 完成时间：2024-07-16 16:30:15

## 2024-07-17: 重写应用资产监管中告警类型分布组件及数据

- 重写了DonutChart组件，添加了点击事件支持和更丰富的配置选项
- 优化了告警类型分布饼图的视觉效果，调整了颜色方案
- 在图表中添加了详细的提示信息，包括告警描述
- 重新生成告警类型分布的假数据，增加了更多告警类型
- 为不同时间范围设计了不同的数据分布规则，使数据更真实
- 添加了告警类型的详细描述信息，增强了数据内容
- 在AssetMonitoring页面中为告警类型分布组件添加了时间选择器
- 调整了饼图展示参数，从南丁格尔玫瑰图改为标准环形图，提高可读性
- 完成时间：2024-07-17 14:45:30

## 2024-07-18: 修复DonutChart组件并创建图表测试页面

- 修复了DonutChart组件中的series配置问题，确保环形图正确渲染
- 优化了DonutChart组件的事件处理机制，支持点击交互
- 创建了ChartTest测试页面，用于展示和测试各种图表组件
- 在测试页面中实现了从原始ECharts配置到DonutChart组件的转换示例
- 增强了DonutChart组件的文档注释，便于开发者理解各配置项的作用
- 完成时间：2024-07-18 11:30:45

## 2024-07-18: 优化数据资产防护监测页面布局

- 根据UI设计图重新调整数据资产防护监测页面的整体布局
- 采用上下两部分的主要布局结构：
  - 上部分分为左右布局：
    - 左侧展示访问关系图以及数据资源数、数据分类数、数据分级数统计
    - 右侧采用上下布局，分别展示风险最多数据资源TOP和高敏数据使用风险最多人员TOP
  - 下部分分为左右布局：
    - 左侧采用左右布局，分别展示存在存储风险的数据资源TOP和存在防护能力缺失的数据资源TOP
    - 右侧展示最常发生的风险类型趋势图
- 优化了卡片内容的展示，调整了各个区域的高度和空间分配
- 调整了组件的标题文案，使其更符合业务语境
- 完善了页面组件的注释文档，更新了组件的功能描述
- 完成时间：2024-07-18 15:45:20

## 2024-07-14
1. 优化应用资产监控页面，提取TOP展示组件
2. 新增TopRankingCard通用组件，支持多种展示方式（表格、柱状图、条形图、饼图、环形图等）
3. 创建topRankingData.ts文件，提供多种排名数据用于测试
4. 在应用资产监控页面使用不同样式的TopRankingCard组件展示数据
5. 更新charts目录下的README.md，添加TopRankingCard组件的使用说明

## 2024-07-19：优化TopRankingCard组件的容器适应能力
1. 为TopRankingCard组件添加fitContainer属性，使其能够动态适应父容器高度
2. 使用flexbox布局重构组件内部结构，确保内容能够填充整个容器空间
3. 添加ResizeObserver监听容器大小变化，实时调整图表高度
4. 优化资产监控页面布局，使用grid和flex布局组织内容，解决空白区域问题
5. 调整关系图和图表容器高度，使页面视觉更加统一
6. 更新组件文档和使用示例，详细说明新属性的使用方法
7. 完成时间：2024-07-19 12:30:45

## 2024-07-20：美化告警类型分布环形图
1. 将告警类型分布图从TopRankingCard组件改为使用EnhancedDonutChart组件
2. 优化标签显示方式，使标签直接跟随在圆环外侧，配合引导线指向对应扇区
3. 调整标签样式，使用红色粗体显示告警类型名称，常规字体显示具体数值
4. 去除图表底部的图例，改为在圆环中央显示"告警事件数"文本
5. 调整颜色方案，使红色扇区更加突出，提高图表可读性
6. 添加圆环扇区之间的边框，使扇区之间界限更加清晰
7. 完成时间：2024-07-20 15:25:36

## 2024-07-21：优化告警类型分布环形图的数据处理
1. 为EnhancedDonutChart组件添加数据归一化处理功能
2. 修改标签显示逻辑，同时展示原始数值和百分比
3. 优化提示框内容，使其更加清晰地显示告警类型、数量和占比
4. 在环形图中心增加总数显示，直观展示总告警数
5. 修改AssetMonitoring页面中的图表配置，启用数据归一化并使用动态生成的告警类型数据
6. 确保不同时间范围下的数据归一化处理保持一致
7. 完成时间：2024-07-21 16:40:25

## 2024-07-21：调整告警类型分布环形图中心文本布局
1. 调整环形图中心数字和文字的相对位置，使其更加合理
2. 将"告警事件数"文字上移，与数字分离
3. 将总数字值下移并增大字号，提高可读性
4. 完成时间：2024-07-21 17:15:42

## 2024-07-21：为业务应用访问趋势和告警类型分布添加独立时间选择器
1. 将页面中的时间范围状态拆分为两个独立状态：businessTrendTimeRange和alarmTypeTimeRange
2. 为两个图表分别创建独立的useEffect钩子，单独获取和处理各自的数据
3. 添加独立的时间范围处理函数：handleBusinessTrendTimeRangeChange和handleAlarmTypeTimeRangeChange
4. 修改数据结构，按照getChartData函数返回的格式正确处理各个图表的数据
5. 确保每个图表可以独立切换时间范围而不影响另一个图表
6. 完成时间：2024-07-21 17:45:32

## 2024-07-21：修复图表加载状态共享问题
1. 将共享的isLoading状态拆分为两个独立状态：businessTrendLoading和alarmTypeLoading
2. 修改业务应用访问趋势图表的useEffect钩子，使用businessTrendLoading状态控制加载过程
3. 修改告警类型分布图表的useEffect钩子，使用alarmTypeLoading状态控制加载过程
4. 更新图表组件的条件渲染逻辑，使用各自的loading状态
5. 解决了切换一个图表的时间范围会导致另一个图表也刷新的问题
6. 完成时间：2024-07-21 18:15:45

## 2024-07-21：优化TOP组件显示和交互方式
1. 修改TopRankingCard组件，使其显示真实数据数量而非硬编码数值
2. 将"更多"链接改为按钮样式，点击后弹出模态框展示完整数据列表
3. 添加模态框组件，包含关闭按钮、标题和完整数据的表格展示
4. 优化表格样式，包括列宽、行高和悬停效果
5. 移除AssetMonitoring页面中的硬编码total值，使用真实数据数量
6. 添加处理项目点击的回调函数，为后续功能扩展做准备
7. 完成时间：2024-07-21 ${new Date().toLocaleString()}

## 2024-07-22：实现通用Notification通知组件
1. 创建通用Notification组件，支持四种通知类型：成功、警告、错误和信息
2. 实现符合设计规范的通知样式，包括不同类型的图标和颜色方案
3. 添加自动关闭功能，支持自定义显示时长
4. 提供onClose回调，便于上层组件监听通知关闭事件
5. 支持通过visible属性控制通知的显示和隐藏
6. 设计简洁的API接口，便于在全局范围内使用
7. 完成时间：2024-07-22 ${new Date().toLocaleString()}

## 2024-07-23：修复ResourceFlowChart组件中的类型导入问题
1. 修复ResourceFlowChart组件无法导入resourceFlowData.ts的问题
2. 将原来从外部导入的枚举和接口定义改为内联定义，消除外部依赖
3. 确保DetailPanel组件中的value属性正确转换为字符串类型
4. 完成时间：2024-07-23 ${new Date().toLocaleString('zh-CN')}

## 2024-07-23：在数据资产防护监测页面实现资源访问关系图
1. 优化了数据资产防护监测页面的访问关系图展示
2. 接入 resourceFlowData 模拟数据源，使用包含异常连接的数据集
3. 正确配置了 ResourceFlowChart 组件，传入节点和边的初始数据
4. 启用了图表控件和自动适应视图功能，提高用户体验
5. 为图表添加了详细的说明文本，提升用户对数据链路的理解
6. 完成时间：2024-07-23 ${new Date().toLocaleString('zh-CN')} 