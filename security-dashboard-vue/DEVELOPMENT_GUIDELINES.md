# 页面开发规范

本规范旨在统一前端页面开发模式，提高代码的可维护性、可复用性和团队协作效率。

## 核心原则：关注点分离 (Separation of Concerns)

我们将页面开发相关的代码按职责划分到不同的目录中：

1.  **`src/views` (页面层)**

    - **职责**:
      - 定义页面的整体布局结构（例如使用 Grid 或 Flexbox）。
      - 组合并放置 `src/components` 中的组件，形成完整的页面。
      - 作为页面数据的入口，负责调用 API 或加载 Mock 数据。
      - 将获取到的数据通过 `props` 传递给子组件。
    - **样式**: 定义仅应用于特定页面的顶层样式，如页面背景、整体边距等。
    - **关注点**: 页面结构、组件编排、数据流管理。

2.  **`src/components` (组件层)**
    - **职责**:
      - 封装可复用的 UI 单元或功能模块（例如卡片、图表、按钮等）。
      - 接收来自父组件（通常是 `view`）传递的数据 (`props`)，并根据数据渲染自身。
      - 实现组件自身的业务逻辑和交互。
    - **样式**: 定义组件内部的样式，确保其在不同上下文中表现一致。
    - **关注点**: UI展现、独立功能、数据展示、可复用性。

## 好处

- **结构清晰**: 代码组织更合理，易于理解和定位。
- **易于维护**: 修改局部功能只需关注对应组件，降低耦合度。
- **高度复用**: 通用组件可在多个页面重复使用，提升开发效率。
- **方便协作**: 不同开发者可并行开发页面布局和独立组件。
- **易于测试**: 独立组件更易于进行单元测试和集成测试。

## 示例 (以安全仪表盘为例)

- **`src/views/DashboardOverview.vue`**: 负责整体布局，引入并排列 `ResourceCard.vue`, `SecurityRuleCard.vue`, `Chart.vue` 等组件，获取并传递数据。
- **`src/components/ResourceCard.vue`**: 接收资源相关数据，展示卡片样式和内容。
- **`src/components/charts/LineChart.vue`**: 通用折线图组件，接收数据和配置项进行绘制。

请遵循此规范进行页面开发。

## 父子组件布局交互与最佳实践

理解父组件（通常是 `view`）和子组件（`component`）在布局上的相互影响至关重要，可以避免许多常见的布局问题（如内容撑破容器）。

**核心交互机制:**

1.  **子组件影响父布局**: 默认情况下，父容器的高度（如果设为 `auto`）会由其内部子组件的内容撑开。如果子组件内容过多，可能会导致父容器尺寸超出预期，影响整体页面布局。
2.  **父布局约束子组件**: 父容器通过其自身的布局方式（如 Grid, Flexbox）和尺寸限制（`width`, `height`, `max-width`, `max-height`）为子组件提供了渲染的"舞台"或可用空间。

**最佳实践:**

- **明确父容器尺寸与溢出处理**:
  - 对需要固定尺寸或有尺寸限制的父区域，明确设置 `width`/`height` 或 `max/min` 属性。
  - **关键**: 在可能溢出的容器上（父或子内部）使用 `overflow: hidden;` (裁剪), `overflow: auto;` (滚动条) 或 `overflow: scroll;` 来控制超出的内容。
- **善用 Flexbox 和 Grid 的弹性**:
  - 利用 `flex-grow`, `flex-shrink`, `flex-basis` (Flexbox) 和 `fr` 单位, `minmax()` (Grid) 来灵活控制子项如何适应和分配空间。
- **组件内部做好内容约束**:
  - 组件应负责任地管理其内部内容，例如使用 `max-width: 100%` 处理图片，`word-break: break-word;` 处理长文本，对无限列表设置 `max-height` 和 `overflow-y: auto;`。
- **保持组件样式独立**:
  - 使用 `<style scoped>` 避免样式污染。
  - 组件间距通常由父布局（如 `gap` 属性或父级添加 `margin`）控制，而非组件自身设置大 `margin`。
- **谨慎使用绝对/固定定位**: `position: absolute/fixed` 会脱离文档流，应谨慎使用，避免布局复杂化。

**总结思路:**

- **父级管"坑位"**: View 负责划分区域、定义结构、分配空间。
- **子级管"内容"**: Component 负责在分配的空间内展示内容，并处理好自身内容的溢出情况。
